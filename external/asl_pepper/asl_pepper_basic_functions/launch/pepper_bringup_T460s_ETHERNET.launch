<?xml version="1.0"?>
<launch>

  <arg name="nao_ip"              default="$(optenv PEPPER_IP 10.42.0.49)" />
  <arg name="nao_port"            default="$(optenv NAO_PORT 9559)" />

  <arg name="roscore_ip"          default="127.0.0.1" />
  <arg name="network_interface"   default="$(optenv DEFAULT_ETH_INTERFACE enp0s31f6)" />

  <arg name="namespace"           default="pepper_robot" />

  <arg name="realsense"           default="false" />
  <arg name="joystick_cmd_vel"    default="/cmd_vel" />

  <!-- naoqi driver -->
  <include file="$(find naoqi_driver)/launch/naoqi_driver.launch">
    <arg name="nao_ip"            value="$(arg nao_ip)" />
    <arg name="nao_port"          value="$(arg nao_port)" />
    <arg name="roscore_ip"        value="$(arg roscore_ip)" />
    <arg name="network_interface" value="$(arg network_interface)" />
    <arg name="namespace"         value="$(arg namespace)" />
  </include>

  <!-- launch pose manager -->
  <include file="$(find naoqi_pose)/launch/pose_manager.launch" ns="$(arg namespace)/pose" >
    <arg name="nao_ip"            value="$(arg nao_ip)" />
    <arg name="nao_port"          value="$(arg nao_port)" />
  </include>

  <!-- launch perception -->
<!--   <include file="$(find asl_pepper_basic_functions)/launch/perception.launch.xml"> -->
<!--     <arg name="namespace"         value="$(arg namespace)" /> -->
<!--   </include> -->

  <!-- launch lasers -->
  <include file="$(find asl_pepper_basic_functions)/launch/sick_lasers.launch">
  </include>

  <!-- launch joystick control -->
  <include file="$(find asl_pepper_joystick)/launch/joystick_control.launch">
    <remap from="/cmd_vel" to="$(arg joystick_cmd_vel)" />
  </include>

  <!-- launch visensor -->
<!--   <include file="$(find visensor_node)/launch/dense.launch"/> -->

  <!-- launch realsense -->
  <include file="$(find realsense2_camera)/launch/rs_aligned_depth.launch" if="$(arg realsense)"/>
<!--   <include file="$(find rwth_crowdbot_launch)/launch/rwth_crowdbot_launch.launch" if="$(arg realsense)"/> -->

  <!-- Transform from maplab map frame to pepper odom frame -->
  <!-- necessary because tfs can only have one parent -->
  <node pkg="tf" type="static_transform_publisher" name="link1_broadcaster"
    args="0 0 0 0 0 0 1 imu0 imu 100" />

</launch>
